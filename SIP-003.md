# SIP-003: Decision Semantics & Audit Guarantees

| Metadata | Details |
| :--- | :--- |
| **SIP Number** | 003 |
| **Title** | Decision Semantics & Canonical State |
| **Author** | Maestro & Nexus (The Foundation) |
| **Status** | **Approved** |
| **Type** | Standards Track (Core) |
| **Created** | 2025-12-24 |
| **License** | CC0-1.0 (Public Domain) |

## 1. Abstract
This proposal defines the technical and legal definition of a **"Valid Decision"** within the Sopcos ecosystem. It establishes the atomic structure of a decision object and clearly delineates the liability boundary between the **"Decision"** (Sopcos Protocol) and the **"Action"** (Control System). This standard serves as the "Source of Technical Truth" for auditors, insurers, and judicial bodies.

## 2. The Decision Canon

For a data block to be considered a valid "Sopcos Decision" and committed to Axon, it must contain the following **Atomic Structure**.

### 2.1. Anatomy of a Valid Decision
Any decision lacking these fields or failing cryptographic verification is considered **"NULL AND VOID."**

```json
{
  "decision_id": "UUID-v4",          // Unique Decision Identifier
  "timestamp_utc": "ISO-8601",       // UTC Timestamp (Not Gateway Local Time)
  "input_hash": "SHA-256",           // Fingerprint of the payload (Privacy Preserved)
  "policy_hash": "SHA-256",          // Hash of the SPL contract active at that moment
  "rule_id": "String",               // Specific rule identifier (e.g., "SAFETY-RULE-01")
  "verdict": "ALLOW | DENY | WARN",  // The Judgment
  "gateway_id": "Public_Key_Hash",   // Identity of the Judge (Synapse Node)
  "signature": "ECDSA_Signature"     // Non-repudiable seal of the Gateway
}
```
* **ALLOW:** Operation authorized.

* **DENY:** Operation strictly forbidden.

* **WARN:** Operation authorized but flagged as "At Risk." Liability shifts to the operator/system acknowledging the warning.

### 2.2. Validity Conditions
1.  **Integrity:** `input_hash` and `policy_hash` must be consistent with the `verdict`.
2.  **Authorship:** The `signature` must be verifiable against the `gateway_id`'s registered public key.
3.  **Traceability:** The `policy_hash` must point to a valid, historically recorded SPL contract on Axon. Decisions based on "Ghost Policies" are invalid.

## 3. The Liability Shield: Decision â‰  Action

This section defines the legal liability boundary of the Sopcos Protocol.

### 3.1. Definition of Roles
* **Sopcos (Synapse):** Acts as a **"Policy Decision Point (PDP)."**
* **Controller (PLC/SCADA):** Acts as a **"Policy Enforcement Point (PEP)."**

### 3.2. The Non-Action Clause
> **"The Sopcos Protocol does not perform physical actions; it validates the legitimacy of intended actions."**

* **Incorrect Statement:** "Sopcos stopped the press machine."
* **Correct Statement:** "Sopcos **FORBADE (DENY)** the operation of the press machine. The execution of this prohibition (cutting power) is the responsibility of the Controller Software."

### 3.3. Legal Implication
If Sopcos issues a `DENY` verdict (signed and logged), but the machine continues to operate and causes an accident:
* **Liability:** Lies solely with the **"Controller Software"** (Integrator/Vendor) or the Operator who bypassed the system.
* **Proof:** The signed `DENY` record on Axon serves as immutable proof that the Protocol fulfilled its duty, exonerating the Foundation and the Protocol logic.

## 4. Audit Semantics

What guarantees does an Auditor or Court have when querying Axon?

### 4.1. Causality Guarantee
The system provides a mathematical proof of causality:
> **"At Time T, Decision Z was rendered based on Rule Y triggered by Data X."**
No link in this chain can be retroactively altered.

### 4.2. Non-Repudiation
A Gateway (or its Operator) cannot claim *"I didn't make that decision, the logs were tampered with."*
Since the decision is signed by the Gateway's **Private Key**, repudiation is mathematically impossible (equivalent to admitting key negligence).

### 4.3. Privacy by Design
Sopcos stores the `input_hash`, not the `raw_input`.
This ensures that trade secrets or GDPR-sensitive data are not exposed on the Blockchain, while still allowing auditors to verify (by hashing their copy of the data) that the decision was correct.